{
  "providers": ["node"],
  "phases": {
    "setup": {
      "nixPkgs": ["nodejs_20", "npm-10_x", "openssl"]
    },
    "install": {
      "cmds": [
        "NPM_CONFIG_PRODUCTION=false NPM_CONFIG_OPTIONAL=true npm_config_platform=linux npm_config_arch=x64 npm ci --include=dev --include=optional"
      ]
    },
    "build": {
      "cmds": [
        "npx prisma generate",
        "npm run build"
      ]
    }
  }
}
