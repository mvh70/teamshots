---
description: React and Next.js best practices for modern web applications
globs: **/*.tsx, **/*.jsx, app/**/*.tsx, components/**/*
---

# React & Next.js Best Practices

## Project Structure
- Use App Router directory structure
- Route-specific components in `app/` directory
- Shared components in `components/`
- Utilities in `lib/`, business logic in `src/domain/`
- Lowercase with dashes for directories: `components/auth-wizard`

## Components
- Server Components by default (no 'use client')
- Mark Client Components explicitly with 'use client'
- Keep components small and focused (single responsibility)
- Use composition over inheritance
- Wrap Client Components in Suspense with fallback
- Place static content and interfaces at file end

## State Management
- Minimize client-side state
- Use Server Components for data fetching when possible
- useState for local component state
- useReducer for complex state logic
- Context API sparingly for shared state
- Keep state close to where it's used

## Data Fetching
- Prefer Server Components for data fetching
- Implement proper error handling
- Use appropriate caching strategies
- Handle loading and error states

## Performance
- Server Components (RSC) by default
- Optimize images: WebP format, size data, lazy loading
- Minimize useEffect and setState usage
- Dynamic loading for non-critical components
- useMemo/useCallback for expensive operations
- React.memo for expensive components
- Proper key props in lists

## Hooks
- Follow Rules of Hooks (top level only, React functions only)
- Custom hooks for reusable logic
- Appropriate dependency arrays in useEffect
- Cleanup in useEffect when needed
- Keep hooks focused and simple

## Forms & Validation
- Zod for form validation
- Server-side validation required
- Controlled components for inputs
- Show loading states during submission
- Handle form errors appropriately

## Error Handling
- Implement Error Boundaries
- Handle async errors properly
- User-friendly error messages
- Proper fallback UI
- Log errors appropriately

## Routing
- Use App Router conventions
- Implement loading.tsx and error.tsx for routes
- Dynamic routes with proper params
- Handle parallel routes when needed

## Accessibility
- Semantic HTML elements
- Proper ARIA attributes
- Keyboard navigation support
- Focus management
- Alt text for images

## Code Organization
- Group related components together
- Proper file naming (kebab-case)
- Keep styles close to components
- Clear imports/exports
- Document complex logic
