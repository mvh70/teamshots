@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --background: #ffffff;
  --foreground: #171717;
  
  /* Brand Colors - Simplified 3-color system for clarity */
  --brand-primary: #6366F1;        /* Indigo - Brand identity */
  --brand-primary-hover: #4F46E5;
  --brand-primary-light: #EEF2FF;  /* Indigo-50 */
  --brand-primary-lighter: #E0E7FF; /* Indigo-100 */
  
  --brand-secondary: #10B981;      /* Green - Success states */
  --brand-secondary-hover: #059669;
  
  --brand-cta: #EA580C;            /* Orange - Call-to-action */
  --brand-cta-hover: #C2410C;
  --brand-cta-light: #FFF7ED;      /* Orange-50 */
  --brand-cta-ring: #FB923C;       /* Orange-500 for rings */
  --brand-cta-shadow: #FED7AA;     /* Orange-200 for shadows */
  
  --brand-premium: #8B5CF6;        /* Violet - Premium tier */
  --brand-premium-ring: #8B5CF6;   /* Violet-500 for rings */
  
  /* Text Colors - WCAG AA+ Compliant */
  --text-dark: #111827;      /* Gray-900 for headings */
  --text-body: #374151;      /* Gray-700 for body (7.25:1 contrast) */
  --text-muted: #6B7280;     /* Gray-500 for secondary info */
  
  /* Background Colors */
  --bg-white: #FFFFFF;
  --bg-gray-50: #F9FAFB;
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

/* General responsive styles for all onborda tours */
@media (max-width: 640px) {
  /* Ensure onborda cards stay within viewport on mobile */
  /* Target the card component wrapper */
  [data-onborda-tour] {
    max-width: calc(100vw - 2rem) !important;
  }

  /* Prevent cards from being positioned off-screen */
  [data-onborda-tour][style*="left"] {
    max-width: calc(100vw - 2rem) !important;
  }

  [data-onborda-tour][style*="right"] {
    max-width: calc(100vw - 2rem) !important;
  }
}

/* Prevent onborda highlight from affecting layout */
.onborda-highlight,
[class*="onborda-highlight"],
[class*="highlight"] {
  position: absolute !important;
  pointer-events: none !important;
  will-change: transform !important;
  contain: layout style paint !important;
}

/* Prevent highlight from triggering layout shifts */
[data-onborda-highlight] {
  position: absolute !important;
  pointer-events: none !important;
  will-change: transform !important;
  contain: layout style paint !important;
}

/* Prevent highlight from affecting GenerationCard slider */
[data-onborda="action-buttons"],
[data-onborda="regenerations-info"] {
  position: relative !important;
  isolation: isolate !important;
}

/* Prevent highlight from affecting feedback rating position */
[data-onborda="feedback-rating"] {
  position: absolute !important;
  isolation: isolate !important;
  contain: layout style paint !important;
  /* Ensure feedback buttons stay in place when highlighted */
  z-index: 20 !important;
}

/* Ensure onborda highlight overlay doesn't affect feedback button positioning */
[data-onborda-highlight] ~ [data-onborda="feedback-rating"],
[data-onborda="feedback-rating"][data-onborda-highlight] {
  position: absolute !important;
  bottom: 0.5rem !important;
  left: 0.5rem !important;
  transform: none !important;
  margin: 0 !important;
  padding: 0 !important;
}

/* Ensure highlight overlay doesn't affect parent layout */
[data-onborda-highlight] ~ *,
* [data-onborda-highlight] {
  position: relative !important;
}

/* Prevent GenerationCard from being affected by highlight overlays */
.rounded-lg.border.border-gray-200 {
  contain: layout style !important;
  isolation: isolate !important;
}

/* Ensure slider container is isolated */
.aspect-square {
  contain: layout style paint !important;
  isolation: isolate !important;
}

/* Onborda card positioning overrides for generation-detail tour */
/* Position generation-detail tour cards - responsive approach */
[data-onborda-tour="generation-detail"][data-onborda-step="0"],
[data-onborda-tour="generation-detail"][data-onborda-step="1"],
[data-onborda-tour="generation-detail"][data-onborda-step="2"] {
  /* Base positioning - let onborda handle relative to target */
  position: absolute !important;
  z-index: 9999 !important;
  pointer-events: auto !important;
  max-width: min(400px, calc(100vw - 2rem)) !important;
}

/* Desktop positioning - cards appear above their targets */
@media (min-width: 641px) {
  [data-onborda-tour="generation-detail"][data-onborda-step="0"] {
    /* Step 1: Position above target with left alignment */
    bottom: auto !important;
    top: auto !important;
    left: 0 !important;
    right: auto !important;
    transform: translateY(-100%) translateY(-20px) !important;
  }
  
  [data-onborda-tour="generation-detail"][data-onborda-step="1"] {
    /* Step 2: Position above target with right alignment */
    bottom: auto !important;
    top: auto !important;
    left: -100px !important;
    transform: translateY(-100%) translateY(-20px) !important;
  }

  [data-onborda-tour="generation-detail"][data-onborda-step="2"] {
    /* Step 3: Position above target with left alignment */
    bottom: auto !important;
    top: auto !important;
    left: 0 !important;
    right: auto !important;
    transform: translateY(-100%) translateY(-20px) !important;
  }
}

/* Mobile responsive positioning for generation-detail tour */
@media (max-width: 640px) {
  

  [data-onborda-tour="generation-detail"][data-onborda-step="0"] {
    /* Step 1: Position above target with left alignment */
    position: absolute !important;
    top: 0px !important;
    left: -100px !important;
    transform: translateY(-100%) translateY(-20px) !important;
  }

  [data-onborda-tour="generation-detail"][data-onborda-step="1"] {
    /* Step 1: Position above target with left alignment */
    position: absolute !important;
    top: 0px !important;
    left: -200px !important;
    transform: translateY(-100%) translateY(-20px) !important;
  }

  [data-onborda-tour="generation-detail"][data-onborda-step="2"] {
    /* Step 1: Position above target with left alignment */
    position: absolute !important;
    top: 30px !important;
    left: -50px !important;
    transform: translateY(-100%) translateY(-20px) !important;
  }

  /* Mobile responsive pointer positioning for generation-detail tour */
  [data-onborda-tour="generation-detail"][data-onborda-step="0"] .onborda-pointer,
  [data-onborda-tour="generation-detail"][data-onborda-step="0"] .onborda-arrow,
  [data-onborda-tour="generation-detail"][data-onborda-step="0"] [data-onborda-pointer],
  [data-onborda-tour="generation-detail"][data-onborda-step="0"]::before,
  [data-onborda-tour="generation-detail"][data-onborda-step="0"]::after,
  [data-onborda-tour="generation-detail"][data-onborda-step="0"] svg,
  [data-onborda-tour="generation-detail"][data-onborda-step="0"] [style*="position: absolute"],
  [data-onborda-tour="generation-detail"][data-onborda-step="0"] [style*="position:absolute"],
  [data-onborda-tour="generation-detail"][data-onborda-step="1"] .onborda-pointer,
  [data-onborda-tour="generation-detail"][data-onborda-step="1"] .onborda-arrow,
  [data-onborda-tour="generation-detail"][data-onborda-step="1"] [data-onborda-pointer],
  [data-onborda-tour="generation-detail"][data-onborda-step="1"]::before,
  [data-onborda-tour="generation-detail"][data-onborda-step="1"]::after,
  [data-onborda-tour="generation-detail"][data-onborda-step="1"] svg,
  [data-onborda-tour="generation-detail"][data-onborda-step="1"] [style*="position: absolute"],
  [data-onborda-tour="generation-detail"][data-onborda-step="1"] [style*="position:absolute"],
  [data-onborda-tour="generation-detail"][data-onborda-step="2"] .onborda-pointer,
  [data-onborda-tour="generation-detail"][data-onborda-step="2"] .onborda-arrow,
  [data-onborda-tour="generation-detail"][data-onborda-step="2"] [data-onborda-pointer],
  [data-onborda-tour="generation-detail"][data-onborda-step="2"]::before,
  [data-onborda-tour="generation-detail"][data-onborda-step="2"]::after,
  [data-onborda-tour="generation-detail"][data-onborda-step="2"] svg,
  [data-onborda-tour="generation-detail"][data-onborda-step="2"] [style*="position: absolute"],
  [data-onborda-tour="generation-detail"][data-onborda-step="2"] [style*="position:absolute"] {
    /* On mobile, hide pointers since cards are centered at bottom and not pointing to specific elements */
    display: none !important;
  }
}

/* Move pointer to bottom left/right of cards for generation-detail tour */
/* Step 1: Pointer on left side */
[data-onborda-tour="generation-detail"][data-onborda-step="0"] .onborda-pointer,
[data-onborda-tour="generation-detail"][data-onborda-step="0"] .onborda-arrow,
[data-onborda-tour="generation-detail"][data-onborda-step="0"] [data-onborda-pointer],
[data-onborda-tour="generation-detail"][data-onborda-step="0"]::before,
[data-onborda-tour="generation-detail"][data-onborda-step="0"]::after,
[data-onborda-tour="generation-detail"][data-onborda-step="0"] svg,
[data-onborda-tour="generation-detail"][data-onborda-step="0"] [style*="position: absolute"],
[data-onborda-tour="generation-detail"][data-onborda-step="0"] [style*="position:absolute"] {
  /* Position at bottom left of card */
  left: 20px !important;
  right: auto !important;
  top: auto !important;
  bottom: -8px !important;

  /* Force down-facing pointer shape using borders */
  width: 0 !important;
  height: 0 !important;
  border-left: 8px solid transparent !important;
  border-right: 8px solid transparent !important;
  border-top: 8px solid #6366F1 !important; /* Brand primary color */
  border-bottom: none !important;
  background: none !important;

  /* Override any transforms */
  transform: none !important;
  margin: 0 !important;
}

/* Step 2: Pointer pointing to action buttons */
[data-onborda-tour="generation-detail"][data-onborda-step="1"] .onborda-pointer,
[data-onborda-tour="generation-detail"][data-onborda-step="1"] .onborda-arrow,
[data-onborda-tour="generation-detail"][data-onborda-step="1"] [data-onborda-pointer],
[data-onborda-tour="generation-detail"][data-onborda-step="1"]::before,
[data-onborda-tour="generation-detail"][data-onborda-step="1"]::after,
[data-onborda-tour="generation-detail"][data-onborda-step="1"] svg,
[data-onborda-tour="generation-detail"][data-onborda-step="1"] [style*="position: absolute"],
[data-onborda-tour="generation-detail"][data-onborda-step="1"] [style*="position:absolute"] {
  /* Position at bottom right of card, pointing down to action buttons */
  left: auto !important;
  right: 20px !important;
  top: auto !important;
  bottom: -8px !important;

  /* Force down-facing pointer shape using borders */
  width: 0 !important;
  height: 0 !important;
  border-left: 8px solid transparent !important;
  border-right: 8px solid transparent !important;
  border-top: 8px solid #6366F1 !important; /* Brand primary color */
  border-bottom: none !important;
  background: none !important;

  /* Override any transforms */
  transform: none !important;
  margin: 0 !important;
}

/* Step 3: Pointer pointing to feedback buttons */
[data-onborda-tour="generation-detail"][data-onborda-step="2"] .onborda-pointer,
[data-onborda-tour="generation-detail"][data-onborda-step="2"] .onborda-arrow,
[data-onborda-tour="generation-detail"][data-onborda-step="2"] [data-onborda-pointer],
[data-onborda-tour="generation-detail"][data-onborda-step="2"]::before,
[data-onborda-tour="generation-detail"][data-onborda-step="2"]::after,
[data-onborda-tour="generation-detail"][data-onborda-step="2"] svg,
[data-onborda-tour="generation-detail"][data-onborda-step="2"] [style*="position: absolute"],
[data-onborda-tour="generation-detail"][data-onborda-step="2"] [style*="position:absolute"] {
  /* Position at bottom left of card, pointing down to feedback buttons */
  left: 20px !important;
  right: auto !important;
  top: auto !important;
  bottom: -8px !important;

  /* Force down-facing pointer shape using borders */
  width: 0 !important;
  height: 0 !important;
  border-left: 8px solid transparent !important;
  border-right: 8px solid transparent !important;
  border-top: 8px solid #6366F1 !important; /* Brand primary color */
  border-bottom: none !important;
  background: none !important;

  /* Override any transforms */
  transform: none !important;
  margin: 0 !important;
}


body {
  background: var(--background);
  color: var(--text-body);
  font-family: var(--font-body), -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  line-height: 1.7;
  letter-spacing: -0.01em;
  /* Safari-specific fixes */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

/* Typography improvements - Enhanced hierarchy */
p, li, span, div {
  line-height: 1.75;
  letter-spacing: -0.01em;
}

h1, h2, h3, h4, h5, h6 {
  color: var(--text-dark);
  font-weight: 700;
  font-family: var(--font-display), serif;
  letter-spacing: -0.02em;
  line-height: 1.15;
}

h1 {
  font-weight: 900;
  letter-spacing: -0.04em;
  line-height: 1.1;
}

h2 {
  font-weight: 800;
  letter-spacing: -0.03em;
  line-height: 1.2;
}

h3 {
  font-weight: 700;
  letter-spacing: -0.02em;
  line-height: 1.3;
}

h4 {
  font-weight: 700;
  letter-spacing: -0.01em;
  line-height: 1.4;
}

/* Enhanced text color hierarchy */
.text-text-body {
  color: var(--text-body);
  line-height: 1.75;
}

.text-text-muted {
  color: var(--text-muted);
  line-height: 1.7;
}

.text-text-dark {
  color: var(--text-dark);
  font-weight: 700;
}

/* Texture overlay utility */
.texture-overlay {
  position: relative;
}

.texture-overlay::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: 
    radial-gradient(circle at 1px 1px, rgba(0, 0, 0, 0.03) 1px, transparent 0);
  background-size: 20px 20px;
  pointer-events: none;
  opacity: 0.5;
  z-index: 0;
}

/* Grain texture utility */
.grain-texture {
  position: relative;
}

.grain-texture::after {
  content: '';
  position: absolute;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='4' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E");
  pointer-events: none;
  z-index: 1;
}

/* Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Placeholder styling for better visibility */
input[type="text"]::placeholder,
input[type="email"]::placeholder,
input[type="password"]::placeholder,
input[type="url"]::placeholder,
textarea::placeholder {
  color: #6b7280 !important;
  opacity: 1 !important;
}

/* Ensure input text is dark and visible */
input[type="text"],
input[type="email"],
input[type="password"],
input[type="url"],
textarea {
  color: #111827 !important;
}

[data-radix-portal]{ position:relative; z-index:2147483647; }

/* Hide scrollbar utility for tab navigation */
.hide-scrollbar {
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE and Edge */
}

.hide-scrollbar::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}

/* Touch manipulation for better mobile interactions */
.touch-manipulation {
  touch-action: manipulation;
}

/* Swipe hint animation for mobile flow */
@keyframes slideRight {
  0%, 100% { transform: translateX(-4px); opacity: 0.6; }
  50% { transform: translateX(4px); opacity: 1; }
}

